project: template
trial: train_sl_rl_v0

model1:
  kind: model
  module: template.models.model1
  checkpoint_interval: null
  max_batch_size: 1
  num_workers: 0
  cpus_per_worker: 0.5
  gpus_per_worker: 0.0
  memory_per_worker: 1024
  use_onnx: null
  local_mode: true
  override_model: true
  tensorboard_graph: true
  tensorboard_step: true

eval_source:
  kind: source
  enable: train
  module: template.sources.source1
  func: build_eval_source
  num_workers: null
  epoch: 10000

train_source:
  kind: source
  enable: train
  module: template.sources.source1
  func: build_source
  num_workers: null
  epoch: 100

eval_buffer:
  kind: buffer
  enable: train
  sources:
    - eval_source
  size: 8
  batch_size: 128
  num_workers: 1
  density: 100

train_buffer:
  kind: buffer
  enable: train
  sources:
    - train_source
  size: 8
  batch_size: 128
  num_workers: 1
  density: 100

buffer1:
  kind: buffer
  enable: train
  size: 8
  batch_size: 128
  num_workers: 2
  density: 100

agent1:
  kind: agent
  module: template.agents.agent1
  class: Agent1

serialize_agent:
  kind: agent
  module: template.agents.serialize_agent
  class: SerializeAgent

render_agent:
  kind: agent
  module: template.agents.render_agent
  class: RenderAgent

metrics_agent:
  kind: agent
  module: template.agents.metrics_agent
  class: MetricsAgent

actor1:
  kind: actor
  port: 8000
  num_workers: 2
  actors_per_worker: 10
  cpus_per_worker: 1.0
  memory_per_worker: 512
  use_tcp: false
  use_gateway: node
  agents:
    - agent1
    - serialize_agent
    - render_agent
    - metrics_agent
  episode_length: null
  use_proto: false
  tick_input_proto:
    module: template.tick_pb2
    message: TickInput
  tick_output_proto:
    module: template.tick_pb2
    message: TickOutput

trainer1:
  kind: trainer
  enable: train
  module: template.trainers.sl_rl_trainer
  class: Trainer1
  model: model1
  buffers:
    - train_buffer
    - buffer1
  buffer_weights:
    - 0.5
    - 0.5
  eval:
    buffer: eval_buffer
    interval: 1000
    steps: 10
  use_gpu: null
  num_workers: null
  cpus_per_worker: null
  batch_size: 1
  batch_kind: concate
  prefetch_size: 1
  max_reuse: 1
  clip_grad_max_norm: 1.0
  weights_publish_interval: 1
  num_steps: 10000000